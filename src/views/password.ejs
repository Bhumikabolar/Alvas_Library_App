<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Change Password</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body class="login-page">
    <div class="login-bg" style="background-image: url('https://www.aiet.org.in/wp-content/uploads/2020/08/IMG_20200703_114737.jpg');"></div>
    <div class="login-wrap">
      <div class="login-card">
        <div class="login-title">
          <img src="/img/logo.jpeg" alt="AIET" />
          <h1>Change Password</h1>
        </div>
        <p class="login-sub">Set a secure password for your account (minimum 6 characters).</p>
        <% if (error) { %>
          <p class="login-error"><%= error %></p>
        <% } %>
        <% if (success) { %>
          <p class="login-error" style="color: #15803d; background: #dcfce7; border: 1px solid #bbf7d0;"><%= success %></p>
        <% } %>
        <form method="post" action="/password" class="login-form">
          <label>Current password</label>
          <input id="current_password" type="password" name="current_password" placeholder="Enter current password" />
          <label>New password</label>
          <input id="new_password" type="password" name="new_password" minlength="6" placeholder="Enter new password (6+ characters)" required />
          <label>Confirm new password</label>
          <input id="confirm_password" type="password" name="confirm_password" minlength="6" placeholder="Confirm new password" required />
          <div class="checkbox-container">
            <input id="toggle_visibility" type="checkbox" /> Show passwords
          </div>
          <div class="login-actions">
            <a href="/catalog">‚Üê Back to Catalog</a>
            <a href="/logout" onclick="if(!confirm('Logout?')) return false;">Logout</a>
          </div>
          <button type="submit">Update Password</button>
        </form>
        <script>
          (function(){
            var toggle = document.getElementById('toggle_visibility');
            var fields = [
              document.getElementById('current_password'),
              document.getElementById('new_password'),
              document.getElementById('confirm_password')
            ];
            function updateTypes() {
              var type = toggle.checked ? 'text' : 'password';
              fields.forEach(function(el){ if (el) el.type = type; });
            }
            toggle.addEventListener('change', updateTypes);
          })();
        </script>
      </div>
    </div>
  </body>
  </html>


